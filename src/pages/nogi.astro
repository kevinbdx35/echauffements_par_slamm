---
import Layout from '../layouts/Layout.astro';
import ExerciceCard from '../components/ExerciceCard.astro';
import exercices from '../data/nogi.json';
import phases from '../data/nogi-phases.json';
const base = import.meta.env.BASE_URL;

const getPhase = (id: number) => phases.find(p => p.id === id);
---

<Layout
  title="üëï √âchauffement NOGI"
  description="√âchauffement rituel NOGI ‚Äî applicable tous les mardis"
>
  <div class="mb-6">
    <a href={base} class="text-gray-500 text-sm">‚Üê Accueil</a>
    <h1 class="text-2xl sm:text-4xl font-black mt-3 mb-1">√âchauffement <span class="text-red-500">NOGI</span></h1>
    <p class="text-gray-400 text-sm mb-3">Tous les mardis ¬∑ {exercices.length} exercices ¬∑ Dans l'ordre</p>
    <div class="flex flex-wrap gap-2">
      <span class="text-xs font-semibold bg-red-500/10 text-red-400 border border-red-500/20 rounded-full px-3 py-1">
        ‚è± 18‚Äì20 min
      </span>
      <span class="text-xs font-semibold bg-gray-800 text-gray-400 border border-gray-700 rounded-full px-3 py-1">
        Z√©ro mouvement inutile
      </span>
    </div>
  </div>

  <div class="flex flex-col gap-4">
    {exercices.map((ex, index) => (
      <>
        {ex.phase > 0 && (index === 0 || exercices[index - 1].phase !== ex.phase) && (() => {
          const phase = getPhase(ex.phase);
          return phase ? (
            <div class="flex items-center gap-3 mt-2">
              <div class="flex-1 h-px bg-gray-700"></div>
              <div class="text-center">
                <span class="text-xs font-black text-red-500 uppercase tracking-widest">{phase.numero}</span>
                <p class="text-white font-bold text-sm">{phase.titre}</p>
                <span class="text-xs text-gray-500">{phase.duree}</span>
              </div>
              <div class="flex-1 h-px bg-gray-700"></div>
            </div>
          ) : null;
        })()}
        <ExerciceCard
          numero={ex.id}
          titre={ex.titre}
          description={ex.description}
          youtubeIds={ex.youtube_ids}
          duree={ex.duree}
        />
      </>
    ))}
  </div>

  <div class="mt-10 bg-gray-800 border border-gray-700 rounded-2xl p-5">
    <h2 class="text-base font-black text-white mb-4">Principes de cet √©chauffement</h2>
    <ul class="flex flex-col gap-3 mb-5">
      <li class="flex gap-3">
        <span class="text-red-500 font-black shrink-0">‚Ä¢</span>
        <span class="text-gray-300 text-sm"><span class="text-white font-semibold">Dur√©e totale :</span> 18‚Äì20 minutes</span>
      </li>
      <li class="flex gap-3">
        <span class="text-red-500 font-black shrink-0">‚Ä¢</span>
        <span class="text-gray-300 text-sm"><span class="text-white font-semibold">Z√©ro mouvement inutile</span> ‚Äî Chaque drill est un pattern qui revient en combat r√©el</span>
      </li>
      <li class="flex gap-3">
        <span class="text-red-500 font-black shrink-0">‚Ä¢</span>
        <span class="text-gray-300 text-sm"><span class="text-white font-semibold">Mont√©e progressive</span> ‚Äî Du solo au partenaire, du lent au plus dynamique</span>
      </li>
      <li class="flex gap-3">
        <span class="text-red-500 font-black shrink-0">‚Ä¢</span>
        <span class="text-gray-300 text-sm"><span class="text-white font-semibold">R√©p√©table √† l'infini</span> ‚Äî C'est un rituel, pas une surprise. Le corps apprend par la r√©p√©tition</span>
      </li>
      <li class="flex gap-3">
        <span class="text-red-500 font-black shrink-0">‚Ä¢</span>
        <span class="text-gray-300 text-sm"><span class="text-white font-semibold">Le cardio vient naturellement</span> ‚Äî En encha√Ænant ces mouvements techniques avec fluidit√©, la fr√©quence cardiaque monte sans jamais faire de "gym"</span>
      </li>
    </ul>
    <p class="text-gray-400 text-sm border-t border-gray-700 pt-4">
      Chaque minute de l'√©chauffement rend meilleur en grappling. Pas de jumping jacks, pas de pompes punitives. Du mouvement sp√©cifique, du drilling l√©ger, de la construction de r√©flexes.
    </p>
  </div>

  <p class="mt-6 text-xs text-gray-600 text-center">
    Cet √©chauffement rituel pourra s'ajuster dans le temps si besoin.
  </p>
</Layout>
